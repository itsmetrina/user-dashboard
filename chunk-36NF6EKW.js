import{A as M,B as f,C as z,D as s,E as c,F as _,G as N,I as A,J as b,K as C,M as H,O as V,Q as B,a as g,b as D,c as S,d as P,e as I,f as w,g as h,h as x,i as E,j as T,k as j,l as k,m as L,p as o,q as d,r as v,s as m,t as l,u as r,v as n,x as $,y as F,z as R}from"./chunk-ANP2DXMA.js";var u=class i{constructor(e){this.http=e}usersSubject=new D([]);users$=this.usersSubject.asObservable();fetchUsers(){return console.log("Fetching user."),this.http.get("https://jsonplaceholder.typicode.com/users").pipe(E(e=>this.usersSubject.next(e)),I(()=>P(()=>"Failed to fetch users")))}getUser(e){return console.log(`Calling User by ${e}`),this.users$.pipe(w(1),h(t=>{let a=t.find(p=>p.id===e);return a?S(a):this.http.get(`https://jsonplaceholder.typicode.com/users/${e}`).pipe(E(p=>{this.usersSubject.next([...t,p])}),I(()=>S(void 0)))}))}static \u0275fac=function(t){return new(t||i)(j(H))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};function W(i,e){i&1&&(r(0,"div"),s(1,"Loading users..."),n())}function X(i,e){i&1&&(r(0,"div",4),s(1,"Failed to load users"),n())}function Y(i,e){if(i&1){let t=R();r(0,"tr",6),M("click",function(){let p=k(t).$implicit,O=f(2);return L(O.onUserClick(p.id))}),r(1,"td"),s(2),n(),r(3,"td"),s(4),n(),r(5,"td"),s(6),n(),r(7,"td"),s(8),n(),r(9,"td"),s(10),n(),r(11,"td"),s(12),n()()}if(i&2){let t=e.$implicit;o(2),c(t.name),o(2),c(t.username),o(2),c(t.email),o(2),c(t.phone),o(2),c(t.address.city),o(2),c(t.company.name)}}function Z(i,e){if(i&1&&(r(0,"table")(1,"caption"),s(2,"Users List"),n(),r(3,"thead")(4,"tr")(5,"th"),s(6,"Name"),n(),r(7,"th"),s(8,"Username"),n(),r(9,"th"),s(10,"Email"),n(),r(11,"th"),s(12,"Phone"),n(),r(13,"th"),s(14,"City"),n(),r(15,"th"),s(16,"Company"),n()()(),r(17,"tbody"),m(18,Y,13,6,"tr",5),n()()),i&2){let t=f();o(18),l("ngForOf",t.filteredUsers)}}var y=class i{constructor(e,t){this.usersservice=e;this.router=t}users=[];filteredUsers=[];loading=!0;error=!1;searchTerm="";destroy$=new g;ngOnInit(){this.usersservice.fetchUsers().pipe(x(this.destroy$)).subscribe({next:e=>{this.users=e,this.filteredUsers=e,this.loading=!1},error:()=>{this.error=!0,this.loading=!1}})}onSearch(e){this.searchTerm=e,this.filteredUsers=this.users.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))}onUserClick(e){this.router.navigate(["/users",e])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(d(u),d(B))};static \u0275cmp=v({type:i,selectors:[["app-users-list"]],decls:5,vars:4,consts:[[1,"search-wrapper"],["type","text","placeholder","Search by name...",3,"input","value"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"error"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"input",1),M("input",function(O){return a.onSearch(O.target.value)}),n()(),m(2,W,2,0,"div",2)(3,X,2,0,"div",3)(4,Z,19,1,"table",2)),t&2&&(o(),l("value",a.searchTerm),o(),l("ngIf",a.loading),o(),l("ngIf",a.error),o(),l("ngIf",!a.loading&&!a.error))},dependencies:[C,A,b],styles:[".search-wrapper[_ngcontent-%COMP%]{margin-bottom:16px;text-align:left}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:280px;padding:10px 14px;border-radius:6px;border:1px solid #ccc;font-size:14px;transition:.2s}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b566}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;font-size:14px}table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{caption-side:top;padding-bottom:10px;font-size:18px;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#3f51b5;color:#fff}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;border-bottom:1px solid #e0e0e0;text-align:left}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s,transform .1s;cursor:pointer}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}.error[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:12px}}"]})};function ee(i,e){i&1&&(r(0,"div",4),s(1,"Loading user..."),n())}function te(i,e){i&1&&(r(0,"div",5),s(1,"Failed to load user"),n())}function ie(i,e){i&1&&($(0),r(1,"h3"),s(2,"User not found"),n(),r(3,"p"),s(4,"This user ID does not exist."),n(),F())}function ne(i,e){if(i&1&&(r(0,"h2"),s(1),n(),r(2,"p")(3,"strong"),s(4,"Email:"),n(),s(5),n(),r(6,"p")(7,"strong"),s(8,"Phone:"),n(),s(9),n(),r(10,"p")(11,"strong"),s(12,"Company:"),n(),s(13),n()),i&2){let t=f(2);o(),c(t.userDetails==null?null:t.userDetails.name),o(4),_(" ",t.userDetails==null?null:t.userDetails.email),o(4),_(" ",t.userDetails==null?null:t.userDetails.phone),o(4),_(" ",t.userDetails==null||t.userDetails.company==null?null:t.userDetails.company.name)}}function re(i,e){if(i&1&&(r(0,"div",6),m(1,ie,5,0,"ng-container",7)(2,ne,14,4,"ng-template",null,0,N),n()),i&2){let t=z(3),a=f();o(),l("ngIf",a.userDetails===void 0)("ngIfElse",t)}}var U=class i{constructor(e,t){this.usersservice=e;this.activatedroute=t}id;userDetails=null;loading=!0;error=!1;destroy$=new g;ngOnInit(){this.activatedroute.paramMap.pipe(x(this.destroy$),h(e=>(this.id=Number(e.get("id")),this.loading=!0,this.usersservice.getUser(this.id)))).subscribe({next:e=>{this.loading=!1,e||(this.userDetails=null,this.error=!0),e&&(this.userDetails={id:e.id,name:e.name,username:e.username,email:e.email,address:{street:e.address.street,suite:e.address.suite,city:e.address.city,zipcode:e.address.zipcode,geo:{lat:e.address.geo.lat,lng:e.address.geo.lng}},phone:e.phone,website:e.website,company:{name:e.company.name,catchPhrase:e.company.catchPhrase,bs:e.company.bs}})},error:()=>{this.error=!0,this.loading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(d(u),d(V))};static \u0275cmp=v({type:i,selectors:[["app-user-details"]],decls:3,vars:3,consts:[["showUserDetails",""],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","user-card",4,"ngIf"],[1,"loading"],[1,"error"],[1,"user-card"],[4,"ngIf","ngIfElse"]],template:function(t,a){t&1&&m(0,ee,2,0,"div",1)(1,te,2,0,"div",2)(2,re,4,2,"div",3),t&2&&(l("ngIf",a.loading),o(),l("ngIf",a.error),o(),l("ngIf",!a.loading&&!a.error))},dependencies:[C,b],styles:["[_nghost-%COMP%]{display:block;padding:20px;max-width:600px;margin:auto}h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;font-weight:600;color:#333}.user-card[_ngcontent-%COMP%]{padding:20px;border:1px solid #d7e3ff;border-radius:10px;background:#d7e3ff}p[_ngcontent-%COMP%]{margin:8px 0;font-size:15px}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.error[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700}.loading[_ngcontent-%COMP%]{font-size:16px;font-weight:500}"]})};var xe=[{path:"",component:y},{path:":id",component:U}];export{xe as USER_ROUTES};
